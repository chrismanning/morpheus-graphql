.PHONY = buildDocs build

.DEFAULT_GOAL = build

build:
	stack install --fast --test

genDocs:
	{ cat docs/template/index-header.md ; \
	  echo "\n<!-- This file is automatically generated with the \"make genDocs\" command. -->\n"; \
	  cat README.md; \
	} > docs/index.md

clean:
	find . -name "*.cabal" -exec rm -rf {} \;
	stack clean

lint: 
	curl -sSL https://raw.github.com/ndmitchell/hlint/master/misc/run.sh | sh -s .

samples:
	stack clean morpheus-graphql-cli
	stack install --fast --test morpheus-graphql-cli
	morpheus build morpheus-graphql-cli/samples/source/simple.gql morpheus-graphql-cli/samples/rendering/Simple.hs
	morpheus build morpheus-graphql-cli/samples/source/mutation.gql morpheus-graphql-cli/samples/rendering/Mutation.hs
	morpheus build morpheus-graphql-cli/samples/source/subscription.gql morpheus-graphql-cli/samples/rendering/Subscription.hs

